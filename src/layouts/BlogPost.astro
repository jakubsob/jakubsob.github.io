---
import BaseLayout from "./BaseLayout.astro";
import Comments from "../components/Comments.astro";
import FormattedDate from "../components/FormattedDate.astro";
import Tag from "../components/Tag.astro";
import { getReadingTime } from "../utils/getReadingTime";

const { post } = Astro.props;
const readingTime = getReadingTime(post.body);
const { title, description, pubDate, updatedDate, tags } = post.data;
---

<html lang="en">
  <BaseLayout title={title} description={description}>
    <main class="border-l-[1px] border-solid border-gray-400">
      <article class="mx-auto max-w-[720px] max-w-100">
        <header class="border-b-[1px] border-solid border-gray-400 pb-2">
          <h1 class="text-balance">{title}</h1>
          {description && <h2>{description}</h2>}
          <div class="flex flex-row items-baseline gap-6">
            <div>
              {pubDate && <FormattedDate date={pubDate} />}
              {
                updatedDate && (
                  <div>
                    Last updated on <FormattedDate date={updatedDate} />
                  </div>
                )
              }
            </div>
            <span class="flex gap-2">
              {
                tags
                  .sort((a: string, b: string): any => b.localeCompare(a))
                  .map((tag: any): any => <Tag value={tag} />)
              }
            </span>
            <div class="ms-auto text-gray-500 text-sm uppercase">
              {readingTime}
            </div>
          </div>
        </header>
        <div class="prose mt-2 text-justify">
          <slot />
        </div>
        <Comments />
      </article>
    </main>
  </BaseLayout>
</html>
